<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Apr 24, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20130424" />
    <meta http-equiv="Content-Language" content="en" />
    <title>DataKungfu - </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<script src="js/jquery.min.js"></script>
                      
        
<script src="js/excanvas.js"></script>
                      
        
<script src="js/js-class.js"></script>
                      
        
<script src="js/bluff.js"></script>
                      
        
<script src="js/twitter.js"></script>
          
            </head>
        <body class="topBarEnabled">
          
                        
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                                  <div class="container"><div class="nav-collapse">
            
                
                                                                                <a class="brand" href="index.html"  title="DataKungfu">

                                
                                    DataKungfu
                
                </a>
                    
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Main <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="index.html"  title="Introduction">Introduction</a>
</li>
                  
                      <li>      <a href="features.html"  title="Features and Problems">Features and Problems</a>
</li>
                  
                      <li>      <a href="credits.html"  title="Credits">Credits</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reports <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="index.html"  title="About">About</a>
</li>
                                  <li>      <a href="team-list.html"  title="Project Team">Project Team</a>
</li>
                                  <li>      <a href="dependency-info.html"  title="Dependency Information">Dependency Information</a>
</li>
                                  <li>      <a href="plugins.html"  title="Project Plugins">Project Plugins</a>
</li>
                                  <li>      <a href="integration.html"  title="Continuous Integration">Continuous Integration</a>
</li>
                                  <li>      <a href="issue-tracking.html"  title="Issue Tracking">Issue Tracking</a>
</li>
                                  <li>      <a href="source-repository.html"  title="Source Repository">Source Repository</a>
</li>
                                  <li>      <a href="license.html"  title="Project License">Project License</a>
</li>
                                  <li>      <a href="plugin-management.html"  title="Plugin Management">Plugin Management</a>
</li>
                                  <li>      <a href="distribution-management.html"  title="Distribution Management">Distribution Management</a>
</li>
                                  <li>      <a href="project-summary.html"  title="Project Summary">Project Summary</a>
</li>
                                  <li>      <a href="mail-lists.html"  title="Mailing Lists">Mailing Lists</a>
</li>
                                  <li>      <a href="dependencies.html"  title="Dependencies">Dependencies</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="apidocs/index.html"  title="JavaDocs">JavaDocs</a>
</li>
                                  <li>      <a href="surefire-report.html"  title="Surefire Report">Surefire Report</a>
</li>
                                  <li>      <a href="pmd.html"  title="PMD Report">PMD Report</a>
</li>
                                  <li>      <a href="cpd.html"  title="CPD Report">CPD Report</a>
</li>
                                  <li>      <a href="findbugs.html"  title="FindBugs Report">FindBugs Report</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
          
                                                              
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>datakungfu</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2013-04-24</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.0-SNAPSHOT</li>
                      
                
            
      
                            </ul>
      </div>

      
                
        <div id="bodyColumn" >
                                  
            <script src='js/twitter.js'></script>

<table>
<tr>
<h3> What IS REALLY ABOUT DATAKUNGFU? </h3>
DataKungfu is a code name to make data analysis a bit of easier. It mainly includes several functions as below:
<ul>
<li> DB2 database connection, query, and update. </li> 
<li> Local database creation, query, update. </li>
<li> XML data handling </li>
<ul>
<!-- <div class='aright'><a href='features.html'>Follow this link you are able to find more detailed features of the DataKungfu</a></div> -->
</tr>

<tr>
<p>In the following section, we will show you some brief concepts and the related examples of how to use DataKungfu</p>
</tr>

<tr>
<h3>DATA KUNGFU JAVA CODES OUTLINE</h3>
<p> First of all, datakungfu is made with JAVA language and its functions can be called by matlab. The reason for us to choose to use Java as a platform for this is because JAVA can be well integrated with 
Matlab, which is a tool we are highly dependent on for data processing. </p>
</br>
<p> If you look at the JAVA source codes, you can find the code structure as listed below. </p>

<img src="images/javasourcecodes.png" alt="java source codes">
 We have divided the java source codes into four packages. 
 <li>The algorithm package. Currently in the algorithm package, there are not really many algorithms 
 available.  In the future, if it involves algorithm part, please put the algorithm codes into this package </li>
 <li>The Data and XML package, It mainly includes the database handling as well as XML handling parts. 
 Currently, we have implemented DB2 connection for remote database handling.  For local database handling, we have used MapDB and BerkelyDB for data
 storage. In the XML package, the XML package includes some main functions used to process the XML files</li>  
 <li> The data timemachine package, it mainly includes the functions used to    </li>
 <li>The utility package. This package contains all necessary tools which will be used for assisting data Kungfu</li>

 </br>
 </br>
 <tr> 
  <h3>DATA KUNGFU MATLAB CODES OUTLINE</h3>
 <img src="images/matlabsourcecodes.png" alt="matlab source codes">

 </br>
 </br>

 <li> Matlab Root classes </li>



 <p>First of all, why we need root classes? It is a simple yet hard to answer question.  If you choose to use object oriented programming method, we can not avoid having root class. 
 Even there is only one class, it is still a root class. So as an object oriented programmer, it is almost infeasible to avoid the root classes. 
 </p>
 <p>
 But this does not mean we have to pay a lot of attention to it? The answer is that we have to pay quite amount of attention to it. For designing object oriented programming, we have to pay a great deal of attention 
 to root classes. It is not necessarily the first step you have to take when designing your program, but it is really an most important step. 
 </p>

<p> So, in the datakungfu matlab codes, there are several root classes, respectively are. </p>

 <ol>
 <li> Helpers  --> A root class used to provide helper functions to other classes. Helper is a good approach, simple yet effective. You do not have to design complex classes structures 
 and simply use helper classes to achieve your design goal. 
 </li>

 <li> Data    ---> This root class can be used to extend some functions related to data transfer, analysis, iterations etc heavy work. For the time being, it has not been really implemented
  However, it will be implemented in the near future for doing some quite heavy data analysis work. 
 </li>

 <li>TimeMachine --> Timemachine as a root class with the idea that we can fetch some data from remote database and bring it to local or cluster nodes, then our life will become much easier. 

 When retriving data from remote database, it is quite cubersome to wait for data and move the data around. 
 So instead of just waitting for data, we just go ahead to move the necessary data to our local computational environment beforehand. 
 We can not move all data to local. But we can move the data we need and delete them when appropriate. By doing so, we can really focus on 
 how to make our program logic more powerful. So with timemachine, you can manipulate quite smoothly in both backward and forward direction.

 TimeMachine is the root class, It is the father of barebonemachine and the grandfather of datatimemachine. 
 If you look at the codes of Timemachine, you can find there are not really much over there. And it is supposed to be so, you do not want to put 
 a lot of codes into root class, like you do not want your 80 years old grand father do a lot of heavy work, What they usually do is to give 
 their children some guidelines and directions. 
 </li>


 <li>ProjectManagementGlobal 

 This root class provides some project management functions to the projecct. For example, you want to set your project as the default starting location 
 when matlab starts. Or you want to put your user name and password over there. Or you may want to put some other matlab utilities functions over there. 
 For example, the data copies and mat files management copies, deletion work... you name them! 
 </li>

 </ol>

 </br>

 <li> BareboneMachine class. It is the parent class of DataTimemachine class. It is also the child class of TimeMacine class, which is the root class.

  As the parent class, bareonemachine does not do very heavy lifting work. It is mainly 
 used to extract the data from remote database. For example, if you want to extract 1000 - 10,000 - 1 M sqls equaled data from DB2 database. You may can do the following:

 <pre>

 TM = DataTimeMachine(user, password, localdbpath); 

  </pre>

 Comment: connect to the database. Where username is your DB2 user name. Password is your DB2 password. localdbpath 
 is the database path and file name, which you need to specify. It is better to put the local database somewhere in your local hard driver. It can increase your database reading 
 and writting speed. 

  <pre>
 TM = TM.prepare_sql_for_bareboone(sql);
   </pre>

 Comment: insert sql related data into local database. NOTE: you can put the sql in a loop. for example, there are thousands of sqls. You just put this line of code in the loops. Then, it will 
 grab data from DB2 database. What you get is essentially all your data for you to be ready to run your program.

 The idea is that it can separate your programming logic part from data grabbing part. Before you start programming your logic, you may know what you are going to do with the data. 
 Then what you simply can do is to run this line of code to grab your data first. While your data is being grabbed. You can program your logic at the same time.
 This means you do not have to wait for the data to be ready while you are programming, which could be a very painfully slow process.

  <pre>
 TM = TM.insert_sql_into_barebone(1);
  </pre>

 Comment: After you have grabbed your sql related data within a big loop. Now it is time to insert your data into the database.  The reason to seperate the sql data prepare from sql data insert
 is because if we just put them together, it could overload the local database, since there is constant insertion to the local database, which can cause memory overflow. 
 Or it can cause local database can not handle such high insertion rate. More research is needed in terms of this topic!



  </br>

 <li>DataTimeMachine class </li>

 As an inherited class from the Barebonemachine class. DataTimeMachine class does most of heavy lifting work. It means that this class is the main interface which exposes most of DataKungfu methods 
 exposed to matlab developers. 


 There are quite bit of codes in this class. First of all, the constructor of the class should be understood 

  <pre>

  function TM = DataTimeMachine(user,password, localdbpath)  %constructors
           % Call super class to import packages
           TM = TM@BareBoneMachine();                         ---> call the super class constructor 
           if nargin< 3 || nargin> 3  % must provide 3 parameters  ---> give the correct constructing parameters 
                 disp('Please provide USER, PASSWORD, and Local Database Path (with name)!!');
                  disp('Retry please!');
           else   
           %import methods from the JAVA jar packages
           TM.xmlmethodshandle = org.vtti.data.XmlData;            --> initiate the java package and return the handle to the java class 
           TM.datatimemachine = org.vtti.timemachine.DatabaseTimeMachine;  --> initiate the java package and return the handle to the java class 
           TM.barebonemachine = org.vtti.timemachine.BareBoneMachine;   --> initiate the java package and return the handle to the java class 
           %methodsview org.vtti.timemachine.BareBoneMachine;   
           TM.user = user;                                          --> initiate the user name 
           TM.password = password;                                  --> initiate the password
           TM.localdbpath = localdbpath;                            --> initiate the local database path name

           TM = TM.start();  % start the Time Machine               --> Start the data time machine
           end
  end 


   function TM = start(TM)
          %Can view the functions that are in the JAVA jar packages  
          %%%methodsview org.vtti.timemachine.DatabaseTimeMachine;

          %prepare for the local db
          TM.localdb = TM.datatimemachine.preparelocaldb(TM.localdbpath);   --> First prepare for the local database path 

          %connect to the remote DB2 database
          TM.conn = TM.datatimemachine.connect(TM.user, TM.password);       --> Connect to the local database

   end

  function close(TM) % close both local and remote databases
           TM.datatimemachine.closeremoteldb(TM.conn);                       ---> Close the remote DB2 database 
           TM.datatimemachine.closelocaldb(TM.localdb);                      ---> Close the local database
  end 

   </pre>

  There are also several functions, and most of them are the functions of reading data from remote database and storing the data to local database.

   <pre>
  Two notable functions are 

        % get data time machine handle, which is returned from jar file
         function datatimemachine = get_data_time_machine(TM) % get the time machine handle
               datatimemachine = TM.datatimemachine;          --> get the time machine handle 
         end 

         % get the xml engine handle, which is returned from jar file
         function xmlmethodshandle = get_xml_engine(TM) % get xml file processing handle
               xmlmethodshandle = TM.xmlmethodshandle;        --> get the XML handle 
         end 
  </pre>

 These two functions are used to get the XML data processing handle. This handle is returned from JAVA codes. 

 So when you want to use XML functions, you just simply do this.

   <pre>
xml_java_array= TM.get_xml_engine().getnodevalues(xmlfile,inputstr, 'snippet');  % call java jar genodevalues function to parse XML file
   </pre>

 So this line of code is meant this. You call  get_xml_engine() function and get the XML processing handle. And then using the handle to call the 
 specific XML processing function [getnodevalues], which is in the java data package, XMLData class. 

 </pre>


 </br>


 <li> Helpers and DataFormatConversionHelper </li>

 <pre>

classdef DataFormatConversionHelper<Helpers

    methods(Static)
         function data = db2dataconvert(datatypes, dataentry, column)
                  if strcmp(datatypes(column),'short')|| strcmp(datatypes(column),'integer')|| strcmp(datatypes(column),'long') 
                      data = sscanf(char(dataentry),'%d');
                  elseif strcmp(datatypes(column),'double')
                      data = sscanf(char(dataentry),'%f');
                  elseif strcmp(datatypes(column),'string')|| strcmp(datatypes(column),'timestamp')
                      data = char(dataentry);
                  else 
                       data = char(dataentry);
                  end 
         end

     end

 end 
  </pre>

 This is the dataformatconversionhelpers code. In this code, it is shown that

 (1) a simple class based matlab coding method, where helpers is the parent class of the DataFormatConversionHelper class 

 (2) how to define a simple helper class and method 

 The function of  db2dataconvert(datatypes, dataentry, column) is used to transform the JAVA data types to matlab data types. 

 If it is short, integer, long java formats, then we need to transfer it to the integer type of Matlab. The double format of the java type will be transfered to 
 double type of matlab

 If it is timestamp format or string format of java, then they will be transfered to char format of matlab 

 For the other java types, it will also be transferred to char type of matlab type. 

 NOTE: A caution should be made for how to translate these data types. In case, there are any special database types, a special transform might be needed, 

 For simplicity, we transfer all other types except the commonly used ones to matlab string type. Though this method might work for most of cases, this might lead to some problems for particular applications in the real practice!




 </tr>
<pre>
</pre>


<div class='aright'>
</div>
    </td>
</tr>
<tr>
</table>

                  </div>
          </div>

    <hr/>

    <footer>
            <div class="container">
              <div class="row span12">Copyright &copy;                   2013.
          All Rights Reserved.      
            
      </div>

        
                <p id="poweredBy" class="pull-right">
                          <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
              </p>
        
                </div>
    </footer>
  </body>
</html>
